\section{Ontwerp}\label{sec:ontwerp}
Het systeem bestaat uit 2 hoofdonderdelen: de sensormodule en een basisstation. De sensormodule meet de pH waarde van een oplossing, en verzend deze naar het basisstation. Het basisstation ontvangt de informatie en slaat deze informatie op.
In \cref{fig:functional} is dit te zien in een systeemdiagram.

\begin{figure}[!htbp]
    \centering
    \includegraphics{toplevelDiagram.pdf}
    \caption[short]{Een diagram van het volledige systeem.}
    \label{fig:functional}
\end{figure}

Het sensormodule blok kan wederom opgedeeld worden in aparte blokken. Dit is te zien in \cref{fig:moduleDiagram}.

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=\textwidth]{moduleDiagram}
    \caption{Een systeemdiagram van de sensormodule.}
    \label{fig:moduleDiagram}
\end{figure}

\subsection{Functionele decompositie}
De sensormodule kan opgedeeld worden in 2 aparte systemen: de voeding, die verder wordt besproken in \cref{sec:voeding}, en de signaalverwerking.

De signaalverwerking bestaat zelf ook weer uit 2 onderdelen: het analoge gedeelte en het digitale gedeelte. In \cref{fig:analogeBewerkingsFunctie} is een decompositie te zien van de signaalbewerkingsfuncties die toegepast worden in het analoge gedeelte. Het digitale gedeelte wordt gedaan in het `Digitale signaalbewerking' blok, die later besproken wordt in \cref{sec:digitaal}.

%TODO: doe dit beter
In de komende paragrafen wordt elk van deze blokken apart besproken. Zoals te zien is in \cref{fig:analogeBewerkingsFunctie} heeft de signaalverwerking 2 paden: de signaalverwerking van de pH waarde (boven) en de signaalverwerking van de temperatuur (onder). Deze twee paden worden gecombineerd door een digitaal signaalbewerkingsblok, die als eerst besproken zal worden. De signaalverwerking van de pH waarde zal eerst besproken worden, beginnend bij de schakeling die de pH sensor uitleest. Aangezien de specificaties van het filter en de versterking gebaseerd zullen worden op de ADC, wordt hierna de ADC besproken. Vervolgens komen de versterking en het filter aan bod.

Hierna zal er verder worden ingegaan op de digitale signaalverwerking en de temperatuurmeting. Tenslotte wordt de voeding van het volledige systeem besproken, die in \cref{fig:moduleDiagram} staat afgebeeld als het `Energie management systeem' blok.

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=0.95\textwidth]{signaalverwerking}
    \caption{Het signaalverwerkingsblok uit \cref{fig:moduleDiagram}.}
    \label{fig:analogeBewerkingsFunctie}
\end{figure}

\input{sections/digitaal}
\input{sections/meten} % ISFET uitleesschakeling
\input{sections/divider} % Spanningsreferentie
\input{sections/adc}
\input{sections/versterker}
\input{sections/filter}
\input{sections/temp}
\input{sections/energie}
\input{sections/rf}



% \begin{table}[!htbp]
%     \centering
%     \begin{tabular}{|l|r|}
%         \hline
%         Ingangen    & Oplossing met een pH waarde tussen de 2 en 10 \\
%                     & Een temperatuur tussen de fliep en floep $^\circ$C \\
%         \hline
%         Uitgangen   & Een BLE RF signaal \\
%         \hline
%         Functie     & Meet de pH waarde van een oplossing en stuurt deze op naar een basisstation.  \\
%         \hline
%     \end{tabular}
%     \caption{Specificaties van }
%     \label{tab:in en uitgangen}
% \end{table}


% TODO: Moet gereformateerd zodat het past in dit formaat.
%\input{sections/functioneel.tex}
