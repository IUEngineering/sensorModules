\section{Realisatie}

\input{sections/meten.tex}
% Ruis van uitlees schakeling
% Overdracht

\subsection{ADC}

% min bits
De ADC zet een analoog signaal om in een digitaal signaal. Hierbij heeft de ADC maar een zekere resolutie. Deze resolutie is afhankelijk van het aantal bits dat de ADC heeft. Een andere oorzaak van fouten bij de ADC is de sample frequentie. Als deze niet hoog genoeg is zal er ook een fout optreden.

\subsubsection{Number of bits} \label{sec:ADC:numBits}
De resolutie van een ADC kan worden uitgerekend met \autoref{eq:adcRes}, waarbij n het aantal bits van de ADC is.
\begin{equation}\label{eq:adcRes}
    Q=\frac{1}{2^n-1}
\end{equation}

Met \autoref{eq:meanSquareErrorADC} is de fout die ontstaat door de eindige resolutie van de ADC te berekenen \cite{MJHcalcADC}. In het geval er uit specificaties een maximale $\overline{e_{eff}^2}$ kan worden gehaald kan met \autoref{eq:calcNeededQ} de minimale resolutie worden berekend.
\begin{equation}\label{eq:meanSquareErrorADC} 
    \overline{e_{eff}^2}=\frac{Q^2}{12}
\end{equation}
\begin{equation}\label{eq:calcNeededQ}
    Q=\sqrt{12\cdot\overline{e_{eff}^2}}
\end{equation}

% $\overline{e_{eff}^2}$ mag niet groter dan de helft van het ingangsruis vermogen zijn (noise figure van 1.5dB).
In het geval van dit ontwerp is er een gegeven noise figure en is de ingangssignaal ruis verhouding en het kleinste ingangssignaal bekend. Door gebruik te maken van \autoref{eq:calcSpecifiedRmsError}.
\begin{equation}\label{eq:calcSpecifiedRmsError}
    \overline{e_{eff}^2}=\left(10^{\frac{NF}{10}}-1\right)\left(\frac{S_{rms}}{10^{SNR+NF/20}}\right)^2
\end{equation}

Door gebruik te maken van \autoref{eq:adcRes}, \autoref{eq:meanSquareErrorADC} en \autoref{eq:calcSpecifiedRmsError}, kan het minimum aantal bits van een ADC berekend worden met \autoref{eq:calcMinNumberADCbits}.
\begin{equation}\label{eq:calcMinNumberADCbits}
    n=\left\lceil\log_2\left(\frac{1}{Q}+1\right)\right\rceil
\end{equation}

\subsubsection{Sample frequentie}\label{sec:ADC:sampleFreq}
% min sample rate
De maximale sample rate voor een gegeven ADC is afhankelijk van het aantal bits van de ADC en de hoogste te meten signaal frequentie. De hoogste sample rate zal dan ook geen fouten meer introduceren \cite{MJHcalcADC}. De formule om de hoogste sample rate mee te berekenen is gegeven door \autoref{eq:ADCmaxFs}.
\begin{equation}\label{eq:ADCmaxFs}
    f_{s,max}\left(n\right)=2^n\pi f_h
\end{equation}
In veel gevallen is de hoogste sample rate niet van interesse omdat die zo hoog ligt dat het een puur theoretisch getal is. Om een minimale sample frequentie te berekenen moet er eerst een toe te stane fout bepaald worden. Deze fout kan door middel van een noise figure gespecificeerd worden. Met een bekende noise figure kan door gebruik te maken van \autoref{eq:ADCmaxSampleError} is er een factor uit te rekenen die gebruikt kan worden in \autoref{eq:ADCminFs} om de minimale sample frequentie uit te rekenen.
\begin{equation}\label{eq:ADCmaxSampleError}
    E=10^{\frac{-NF}{10}}
\end{equation}
\begin{equation}\label{eq:ADCminFs}
    f_{s,min}\left(E\right)=\frac{\pi f_h}{E}
\end{equation}

\subsubsection{Specificaties van de benodigde ADC}
De specificaties van de ADC die nodig is voor dit project kunnen pas bepaald worden op het moment dat de eisen bepaald zijn. Deze kunnen afgeleid worden uit de specificaties van het ADC blok. In \autoref{tab:systemSpecADC} zijn deze specificaties herhaald.
\begin{table}[ht]
    \centering
    \begin{tabular}{l|c|l}
        Symbol      & Waarde & Eenheid\\\hline
        $SNR_{in}$  & 37        & dB\\
        NF          & 3         & dB\\
        $u_{in}$    & 2.5       & mV\\
    \end{tabular}
    \caption{De eisen voor het omzetten van het analoge signaal naar een digitaal signaal.}
    \label{tab:systemSpecADC}
\end{table}
Door gebruik te maken van de formules uit \autoref{sec:ADC:numBits} en \autoref{sec:ADC:sampleFreq} kunnen de specificaties die in \autoref{tab:specADC} staan worden berekend. Dit is in het geval het noise figure van 3dB wordt gesplitst in twee noise figures van 1.5dB. Deze noise figures worden dan gebruikt voor de sample frequentie en het berekenen van het minimum aantal bits.
\begin{table}[ht]
    \centering
    \begin{tabular}{l|c|l}
        Symbol      & Waarde    & Eenheid\\\hline
        n           & 14        & \\
        $f_{s,min}$ & 45        & Hz\\
        NF          & 515       & kHz\\
        $u_{in}$    & 2.5       & mV\\
    \end{tabular}
    \caption{De eisen voor het omzetten van het analoge signaal naar een digitaal signaal.}
    \label{tab:specADC}
\end{table}

\subsection{Anti aliasing filter}
% ruis
% cutoff

\subsection{Digitale signaalverwerking}
% indien er meerdere functies zijn opdelen in meer paragrafen

\subsection{Rf}
% software 
% hardware

\subsection{Energy harvesting}

\subsection{Simulaties (op component niveau)}
